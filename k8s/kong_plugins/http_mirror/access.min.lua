local a=require"socket.http"local b=require"ltn12"local c={}local function d(e)local f=kong.request.get_path()local g=kong.request.get_raw_body()local h=f;if f=="/"then h="/rpc/v1"end;kong.log.notice("real_path: ",h,", body: ",g)if e.mirror_to and string.len(g)>0 and g~=nil then for i,j in ipairs(e.mirror_to)do a.request{method="POST",url=j..h,source=b.source.string(g),headers={["Content-Type"]="application/json",["Content-Length"]=string.len(g)}}collectgarbage("collect")end end end;function c.execute(e)d(e)end;return c